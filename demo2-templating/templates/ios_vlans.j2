spanning-tree mode rapid-pvst
spanning-tree extend system-id
!
!
!
vlan internal allocation policy ascending
!
{% if inventory_hostname in groups['switches'] %}
{% for vlan in vlans | sort -%}
vlan {{ vlan }}
 name {{ vlans[vlan] }}
!
{% endfor %}
!
vlan internal allocation policy ascending
vtp mode transparent
!
!
!
{% if inventory_hostname in groups['core-switches'] -%}
spanning-tree vlan 1-4094 priority 16384
{%- endif %}
{% endif %}
